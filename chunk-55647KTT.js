import{a as A,b as me}from"./chunk-GKZ4DEXO.js";import{a as ge,b as _e,c as fe}from"./chunk-HKF6ANJN.js";import{a as pe}from"./chunk-744XHPKW.js";import{f as ue,i as he}from"./chunk-RO2HGPEC.js";import{b as te,d as ie,m as u,n as ce}from"./chunk-U2SUD6JW.js";import{$ as I,Ab as L,Ad as oe,Da as b,Fd as le,Gb as B,Ia as Q,Ib as G,Oa as w,Pd as de,Qa as K,Qb as S,Ua as f,X as q,aa as V,ab as $,bb as J,cb as W,ea as E,ec as l,fa as c,h as x,hb as T,ib as v,id as U,ja as m,jb as M,ka as p,m as h,na as X,ob as P,pb as Z,rb as g,sa as d,ua as O,ub as R,va as F,vd as ae,xd as ne,yb as H,yc as ee,yd as se,za as Y,zb as j,zd as re}from"./chunk-ONJJYMGM.js";function k(s){return Error("NgxMatDatetimePicker: No provider found for ".concat(s,". You must import one of the following ")+"modules at your application root: NgxMatNativeDateModule, NgxMatMomentDateModule, or provide a custom implementation.")}var Me={provide:ae,useExisting:I(()=>y),multi:!0},ke={provide:ne,useExisting:I(()=>y),multi:!0},y=(()=>{let a=class a{get value(){return this._value()}set value(e){this._assignValue(e)}get min(){return this._min()}set min(e){var i;let t=(i=this._dateAdapter)==null?void 0:i.getValidDateOrNull(this._dateAdapter.deserialize(e));this._min.set(t),this._validatorOnChange()}get max(){return this._max()}set max(e){var i;let t=(i=this._dateAdapter)==null?void 0:i.getValidDateOrNull(this._dateAdapter.deserialize(e));this._max.set(t),this._validatorOnChange()}get dateFilter(){return this._dateFilter()}set dateFilter(e){let t=this._matchesFilter(this.value);this._dateFilter.set(e),this._matchesFilter(this.value)!==t&&this._validatorOnChange()}get disabled(){return this._disabled()}set disabled(e){let t=U(e);this._disabled.set(t),this.focused&&t&&(this.focused=!1),this.stateChanges.next()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}get empty(){return!this._elementRef.nativeElement.value&&!this.value}get shouldLabelFloat(){return this.focused||!this.empty}get required(){return this._required()}set required(e){this._required.set(U(e)),this.stateChanges.next()}get placeholder(){return this._placeholder()}set placeholder(e){this._placeholder.set(e),this.stateChanges.next()}get errorState(){return this._errorState()}constructor(){if(this._elementRef=c(Y),this._dateAdapter=c(u,{optional:!0}),this._dateFormats=c(ce,{optional:!0}),this._formField=c(he,{optional:!0}),this.ngControl=null,this._value=d(null),this._min=d(null),this._max=d(null),this._dateFilter=d(()=>!0),this._disabled=d(!1),this.dateChange=new f,this.dateInput=new f,this.stateChanges=new h,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=x.EMPTY,this._localeSubscription=x.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{ngxMatDatetimePickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=e=>{var i;let t=(i=this._dateAdapter)==null?void 0:i.getValidDateOrNull(this._dateAdapter.deserialize(e.value));return!t||this._matchesFilter(t)?null:{ngxMatDatetimePickerFilter:!0}},this._minValidator=e=>{var n;let t=(n=this._dateAdapter)==null?void 0:n.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),i=this.min;return!i||!t||this._dateAdapter.compareDate(i,t)<=0?null:{ngxMatDatetimePickerMin:{min:i,actual:t}}},this._maxValidator=e=>{var n;let t=(n=this._dateAdapter)==null?void 0:n.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),i=this.max;return!i||!t||this._dateAdapter.compareDate(i,t)>=0?null:{ngxMatDatetimePickerMax:{max:i,actual:t}}},this._validator=se.compose(this._getValidators()),this._lastValueValid=!1,this.controlType="ngx-mat-datetime-picker-input-v2",this.focused=!1,this._required=d(!1),this._placeholder=d(""),this._errorState=d(!1),this.id="ngx-mat-datetime-picker-input-".concat(Math.random().toString(36).substr(2,9)),this._injector=c(X),!this._dateAdapter)throw k("DateAdapter");if(!this._dateFormats)throw k("NGX_MAT_DATE_FORMATS");this._localeSubscription=this._dateAdapter.localeChanges.subscribe(()=>{this._assignValue(this.value)})}ngOnInit(){var e,t;console.log("\u{1F527} NgxMatDatetimePickerInputV2 ngOnInit called"),this.ngControl=this._injector.get(re,null,{optional:!0,self:!0}),console.log("\u{1F527} NgControl found:",!!this.ngControl,(t=(e=this.ngControl)==null?void 0:e.constructor)==null?void 0:t.name),this.ngxMatDatetimePicker?(console.log("\u{1F527} Registering input with datepicker"),this.ngxMatDatetimePicker._registerInput(this)):console.log("\u274C No datepicker available for registration")}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValue(e)}registerOnChange(e){this._cvaOnChange=e,console.log("CVA registerOnChange called",!!e)}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){let t=e.altKey&&e.keyCode===40;this.ngxMatDatetimePicker&&t&&!this._elementRef.nativeElement.readOnly&&(this.ngxMatDatetimePicker.open(),e.preventDefault())}_onInput(e){let t=this._dateAdapter.parse(e,this._dateFormats.display.dateInput);this._lastValueValid=this._dateAdapter.isValid(t);let i=this._dateAdapter.getValidDateOrNull(t);this._value.set(i),this._cvaOnChange(i),this.dateInput.emit(new C(this,this._elementRef.nativeElement))}_onChange(){this.dateChange.emit(new C(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this.focused=!1,this._onTouched(),this.stateChanges.next()}_onClick(e){this.ngxMatDatetimePicker&&!this.disabled&&this.ngxMatDatetimePicker.open()}_formatValue(e){let t=e?this._dateAdapter.format(e,this._dateFormats.display.dateInput):"";this._elementRef.nativeElement.value=t}_assignValue(e){this._value.set(e),this._formatValue(e),this.stateChanges.next()}updateValue(e){console.log("updateValue called with:",e,"onChange available:",!!this._cvaOnChange),this._value.set(e),this._formatValue(e),this._cvaOnChange&&(console.log("Calling _cvaOnChange with:",e),this._cvaOnChange(e)),this.dateChange.emit(new C(this,this._elementRef.nativeElement)),this._onTouched&&this._onTouched(),this.stateChanges.next()}_matchesFilter(e){let t=this.dateFilter;return!t||!e||t(e)}setDescribedByIds(e){}onContainerClick(){this.focus()}focus(){this._elementRef.nativeElement.focus(),this.focused=!0,this.stateChanges.next()}getConnectedOverlayOrigin(){var e;return((e=this._formField)==null?void 0:e.getConnectedOverlayOrigin())||this._elementRef}getStartValue(){return this.value}getThemePalette(){return"primary"}getOverlayLabelId(){return this.id}};a.\u0275fac=function(t){return new(t||a)},a.\u0275dir=K({type:a,selectors:[["input","ngxMatDatetimePicker",""]],hostAttrs:[1,"ngx-mat-datetime-picker-input"],hostVars:6,hostBindings:function(t,i){t&1&&g("input",function(r){return i._onInput(r.target.value)})("change",function(){return i._onChange()})("blur",function(){return i._onBlur()})("keydown",function(r){return i._onKeydown(r)})("click",function(r){return i._onClick(r)}),t&2&&(Z("disabled",i.disabled),$("aria-haspopup",i._datepicker?"dialog":null)("aria-owns",(i._datepicker==null?null:i._datepicker.opened)&&i._datepicker.id||null)("min",i.min?i._dateAdapter.toIso8601(i.min):null)("max",i.max?i._dateAdapter.toIso8601(i.max):null)("data-mat-calendar",i._datepicker?i._datepicker.id:null))},inputs:{ngxMatDatetimePicker:"ngxMatDatetimePicker",value:"value",min:"min",max:"max",dateFilter:"dateFilter",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[S([Me,ke,{provide:ue,useExisting:a}])]});let s=a;return s})(),C=class{constructor(a,_){this.target=a,this.targetElement=_,this.value=this.target.value}};var N=class{constructor(a,_){this.start=a,this.end=_}},D=(()=>{let a=class a{constructor(e,t){this.selection=e,this._adapter=t,this._selectionChanged=new h,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,t){let i=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:t,oldValue:i})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}};a.\u0275fac=function(t){Q()},a.\u0275prov=V({token:a,factory:a.\u0275fac});let s=a;return s})(),Ce=(()=>{let a=class a extends D{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let e=new a(this._adapter);return e.updateSelection(this.selection,this),e}};a.\u0275fac=function(t){return new(t||a)(E(u))},a.\u0275prov=V({token:a,factory:a.\u0275fac});let s=a;return s})(),Ve=(()=>{let a=class a extends D{constructor(e){super(new N(null,null),e)}add(e){let{start:t,end:i}=this.selection;t==null?t=e:i==null?i=e:(t=e,i=null),super.updateSelection(new N(t,i),this)}isValid(){let{start:e,end:t}=this.selection;return e==null&&t==null?!0:e!=null&&t!=null?this._isValidDateInstance(e)&&this._isValidDateInstance(t)&&this._adapter.compareDate(e,t)<=0:(e==null||this._isValidDateInstance(e))&&(t==null||this._isValidDateInstance(t))}isComplete(){return this.selection.start!=null&&this.selection.end!=null}clone(){let e=new a(this._adapter);return e.updateSelection(this.selection,this),e}};a.\u0275fac=function(t){return new(t||a)(E(u))},a.\u0275prov=V({token:a,factory:a.\u0275fac});let s=a;return s})();function we(s,a){return s||new Ce(a)}var De={provide:D,deps:[[new O,new F,D],u],useFactory:we};function Te(s,a){return s||new Ve(a)}var $e={provide:D,deps:[[new O,new F,D],u],useFactory:Te};var Se=["calendar"],Ae=["timepicker"];function ye(s,a){var _,e,t,i,n,r;if(s&1){let o=P();v(0,"div",4)(1,"ngx-mat-timepicker",8,1),g("ngModelChange",function(be){m(o);let ve=R();return p(ve.onTimeChanged(be))}),M()()}if(s&2){let o=R();b(),T("ngModel",o.selectedDateTime())("color",o.data.color)("showSpinners",(_=o.data.showSpinners)!=null?_:!0)("showSeconds",(e=o.data.showSeconds)!=null?e:!1)("stepHour",(t=o.data.stepHour)!=null?t:1)("stepMinute",(i=o.data.stepMinute)!=null?i:1)("stepSecond",(n=o.data.stepSecond)!=null?n:1)("enableMeridian",(r=o.data.enableMeridian)!=null?r:!1)("defaultTime",o.data.defaultTime)("disabled",o.data.disabled)}}var xe=(()=>{let a=class a{constructor(){this.dialogRef=c(ge),this.data=c(_e),this._dateAdapter=c(u),this._destroyed=new h,this.selectedDate=d(this.data.value||null),this.selectedDateTime=d(this.data.value||null);let e=this.data.value;e&&(this.selectedDate.set(e),this.selectedDateTime.set(e))}ngOnInit(){this.calendar&&this.calendar.selectedChange.pipe(q(this._destroyed)).subscribe(e=>this.onDateSelected(e)),this.data.preventOverlayClick&&(this.dialogRef.disableClose=!0)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}onDateSelected(e){if(console.log("Date selected:",e),this.selectedDate.set(e),e)if(this.data.hideTime)this.selectedDateTime.set(e);else{let t=this.selectedDateTime();if(t){let i=this._extractTimeFromDate(t),n=this._combineDateTime(e,i);this.selectedDateTime.set(n)}else{let i=this._getDefaultTime(),n=this._combineDateTime(e,i);this.selectedDateTime.set(n)}}else this.selectedDateTime.set(null)}onYearSelected(e){}onMonthSelected(e){}onTimeChanged(e){if(console.log("\u23F0 Time changed:",e),e){let t=this.selectedDate();if(console.log("\u{1F4C5} Current date for time combination:",t),t){let i=this._extractTimeFromDate(e),n=this._combineDateTime(t,i);console.log("\u{1F550} Combined datetime:",n),this.selectedDateTime.set(n)}else console.log("\u{1F550} No current date, using time as-is"),this.selectedDateTime.set(e)}}onApply(){let e=this.data.hideTime?this.selectedDate():this.selectedDateTime();console.log("\u2705 Dialog onApply - returning result:",e),this.dialogRef.close(e)}onCancel(){console.log("\u274C Dialog onCancel"),this.dialogRef.close()}_getDefaultTime(){if(this.data.defaultTime)return[...this.data.defaultTime];if(this.data.value)return this._extractTimeFromDate(this.data.value);let e=new Date;return[e.getHours(),e.getMinutes(),e.getSeconds()]}_extractTimeFromDate(e){let t=this._dateAdapter.getHours(e),i=this._dateAdapter.getMinutes(e),n=this._dateAdapter.getSeconds(e);return[t,i,n]}_combineDateTime(e,t){let i=this._dateAdapter.clone(e),n=this._dateAdapter.toIso8601(i),r=new Date(n);return r.setHours(t[0]||0),r.setMinutes(t[1]||0),r.setSeconds(t[2]||0),r.setMilliseconds(0),this._dateAdapter.deserialize(r.toISOString())}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=w({type:a,selectors:[["ngx-mat-datetime-picker-content-v2"]],viewQuery:function(t,i){if(t&1&&(H(Se,7),H(Ae,5)),t&2){let n;j(n=L())&&(i.calendar=n.first),j(n=L())&&(i.timepicker=n.first)}},hostAttrs:[1,"ngx-mat-datetime-picker-content-v2"],hostVars:2,hostBindings:function(t,i){t&2&&B("ngx-mat-datetime-picker-content-touch",i.data.touchUi)},decls:9,vars:10,consts:[["calendar",""],["timepicker",""],[1,"ngx-mat-datetime-picker-content"],[3,"selectedChange","yearSelected","monthSelected","startView","startAt","minDate","maxDate","dateFilter","selected"],[1,"ngx-mat-datetime-picker-time"],[1,"ngx-mat-datetime-picker-actions"],["mat-button","","type","button",1,"ngx-mat-datetime-picker-cancel-button",3,"click"],["mat-button","","type","button",1,"ngx-mat-datetime-picker-apply-button",3,"click","color"],[3,"ngModelChange","ngModel","color","showSpinners","showSeconds","stepHour","stepMinute","stepSecond","enableMeridian","defaultTime","disabled"]],template:function(t,i){if(t&1){let n=P();v(0,"div",2)(1,"mat-calendar",3,0),g("selectedChange",function(o){return m(n),p(i.onDateSelected(o))})("yearSelected",function(o){return m(n),p(i.onYearSelected(o))})("monthSelected",function(o){return m(n),p(i.onMonthSelected(o))}),M(),J(3,ye,3,10,"div",4),v(4,"div",5)(5,"button",6),g("click",function(){return m(n),p(i.onCancel())}),G(6," Cancelar "),M(),v(7,"button",7),g("click",function(){return m(n),p(i.onApply())}),G(8," Aplicar "),M()()()}t&2&&(B("ngx-mat-datetime-picker-content-touch",i.data.touchUi),b(),T("startView",i.data.startView||"month")("startAt",i.selectedDate()||i.data.value)("minDate",i.data.minDate)("maxDate",i.data.maxDate)("dateFilter",i.data.dateFilter)("selected",i.selectedDate()),b(2),W(i.data.hideTime?-1:3),b(4),T("color",i.data.color))},dependencies:[ee,de,oe,le,pe,ie,te,me],styles:[".ngx-mat-datetime-picker-content-v2{display:flex;flex-direction:column;max-height:90vh;min-width:296px}.ngx-mat-datetime-picker-content-v2 .ngx-mat-datetime-picker-content{display:flex;flex-direction:column}.ngx-mat-datetime-picker-content-v2 .ngx-mat-datetime-picker-time{padding:16px;border-top:1px solid rgba(0,0,0,.12)}.mat-dark .ngx-mat-datetime-picker-content-v2 .ngx-mat-datetime-picker-time{border-top-color:#ffffff1f}.ngx-mat-datetime-picker-content-v2 .ngx-mat-datetime-picker-actions{display:flex;justify-content:flex-end;gap:8px;padding:8px 16px 16px;border-top:1px solid rgba(0,0,0,.12)}.mat-dark .ngx-mat-datetime-picker-content-v2 .ngx-mat-datetime-picker-actions{border-top-color:#ffffff1f}.ngx-mat-datetime-picker-content-v2.ngx-mat-datetime-picker-content-touch{min-width:320px}.ngx-mat-datetime-picker-content-v2.ngx-mat-datetime-picker-content-touch .ngx-mat-datetime-picker-time{padding:24px}.ngx-mat-datetime-picker-content-v2.ngx-mat-datetime-picker-content-touch .ngx-mat-datetime-picker-actions{padding:16px 24px 24px}.ngx-mat-datetime-picker-content-v2 mat-calendar{display:block}.ngx-mat-datetime-picker-content-v2 mat-calendar .mat-calendar-header{padding:8px 8px 0}.ngx-mat-datetime-picker-content-v2 mat-calendar .mat-calendar-content{padding:0 8px 8px}.ngx-mat-datetime-picker-content-v2 ngx-mat-timepicker{width:100%;display:flex;justify-content:center;align-items:center}.ngx-mat-datetime-picker-content-v2 ngx-mat-timepicker .ngx-mat-timepicker-container{justify-content:center}.ngx-mat-datetime-picker-content-enter{opacity:0;transform:scale(.9);transition:opacity .15s cubic-bezier(.25,.8,.25,1),transform .15s cubic-bezier(.25,.8,.25,1)}.ngx-mat-datetime-picker-content-enter-active{opacity:1;transform:scale(1)}.ngx-mat-datetime-picker-content-exit{opacity:1;transform:scale(1);transition:opacity .15s cubic-bezier(.4,0,.2,1),transform .15s cubic-bezier(.4,0,.2,1)}.ngx-mat-datetime-picker-content-exit-active{opacity:0;transform:scale(.9)}\n"],encapsulation:2,changeDetection:0});let s=a;return s})();var Ne=0,St=(()=>{let a=class a{constructor(){if(this._dialog=c(fe),this._dateAdapter=c(u,{optional:!0}),this._dialogRef=null,this._inputStateChanges=x.EMPTY,this.id="ngx-mat-datetime-picker-".concat(Ne++),this.stateChanges=new h,this.openedStream=new f,this.closedStream=new f,this.startView=l("month"),this.color=l("primary"),this.touchUi=l(!1),this.disabled=l(!1),this.hideTime=l(!1),this.showSpinners=l(!0),this.showSeconds=l(!1),this.stepHour=l(A),this.stepMinute=l(A),this.stepSecond=l(A),this.enableMeridian=l(!1),this.disableMinute=l(!1),this.defaultTime=l(),this.startAt=l(null),this.panelClass=l([]),this._opened=d(!1),this.opened=this._opened.asReadonly(),!this._dateAdapter)throw k("DateAdapter")}ngOnDestroy(){this._inputStateChanges.unsubscribe(),this.stateChanges.complete(),this.close()}_registerInput(e){if(console.log("\u{1F517} Registering input with datepicker:",e.constructor.name),this.datepickerInput)throw Error("A MatDatepicker can only be associated with a single input.");this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next()),console.log("\u2705 Input successfully registered")}open(){if(!(this._opened()||this.disabled())){if(!this.datepickerInput)throw Error("Attempted to open an MatDatepicker with no associated input.");this._opened.set(!0),this._openAsDialog(),this.openedStream.emit()}}close(){this._opened()&&(this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._opened.set(!1),this.closedStream.emit())}select(e){}_getMinDate(){var e;return((e=this.datepickerInput)==null?void 0:e.min)||null}_getMaxDate(){var e;return((e=this.datepickerInput)==null?void 0:e.max)||null}_getDateFilter(){var e;return((e=this.datepickerInput)==null?void 0:e.dateFilter)||null}_openAsDialog(){var n;console.debug("\u{1F680} Opening datetime picker dialog");let e=["ngx-mat-datepicker-dialog"],t=this.panelClass();t&&(Array.isArray(t)?e.push(...t.filter(r=>r)):e.push(t));let i=(n=this.datepickerInput)==null?void 0:n.getStartValue();console.debug("\u{1F4C5} Initial value for dialog:",i),this._dialogRef=this._dialog.open(xe,{panelClass:e,hasBackdrop:!0,backdropClass:"cdk-overlay-dark-backdrop",disableClose:!1,width:this.touchUi()?"320px":"328px",data:{datepicker:this,color:this.color(),touchUi:this.touchUi(),hideTime:this.hideTime(),showSpinners:this.showSpinners(),showSeconds:this.showSeconds(),stepHour:this.stepHour(),stepMinute:this.stepMinute(),stepSecond:this.stepSecond(),enableMeridian:this.enableMeridian(),defaultTime:this.defaultTime(),disabled:this.disabled(),startView:this.startView(),minDate:this._getMinDate(),maxDate:this._getMaxDate(),dateFilter:this._getDateFilter(),value:i}}),this._dialogRef.afterClosed().subscribe(r=>{console.debug("\u{1F51A} Dialog closed with result:",r),r!==void 0&&this.datepickerInput?(console.debug("\u{1F4DD} Attempting to update input value with:",r),console.debug("\u{1F4DD} Input instance:",this.datepickerInput.constructor.name),this.datepickerInput instanceof y?(console.debug("\u2705 Calling updateValue on NgxMatDatetimePickerInputV2"),this.datepickerInput.updateValue(r)):console.debug("\u274C Input is not instance of NgxMatDatetimePickerInputV2")):console.debug("\u274C No result or no input available"),this.close()})}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=w({type:a,selectors:[["ngx-mat-datetime-picker"]],inputs:{startView:[1,"startView"],color:[1,"color"],touchUi:[1,"touchUi"],disabled:[1,"disabled"],hideTime:[1,"hideTime"],showSpinners:[1,"showSpinners"],showSeconds:[1,"showSeconds"],stepHour:[1,"stepHour"],stepMinute:[1,"stepMinute"],stepSecond:[1,"stepSecond"],enableMeridian:[1,"enableMeridian"],disableMinute:[1,"disableMinute"],defaultTime:[1,"defaultTime"],startAt:[1,"startAt"],panelClass:[1,"panelClass"]},outputs:{openedStream:"openedStream",closedStream:"closedStream"},exportAs:["ngxMatDatetimePicker"],features:[S([De])],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0});let s=a;return s})();export{N as a,D as b,De as c,k as d,y as e,St as f};
