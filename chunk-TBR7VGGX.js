import{$b as k,X as D,_ as b,_b as f,ac as I,f as l,fa as i,j as w,na as h,o as x,pa as s,sa as v}from"./chunk-ONJJYMGM.js";function j(n){n||(n=i(s));let e=new w(t=>{if(n.destroyed){t.next();return}return n.onDestroy(t.next.bind(t))});return t=>t.pipe(D(e))}var m=class{constructor(e){l(this,"source");l(this,"destroyed",!1);l(this,"destroyRef",i(s));this.source=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}subscribe(e){if(this.destroyed)throw new b(953,!1);let t=this.source.pipe(j(this.destroyRef)).subscribe({next:r=>e(r)});return{unsubscribe:()=>t.unsubscribe()}}};function A(n,e){return new m(n)}function F(n,e){var o;let t=(o=e==null?void 0:e.injector)!=null?o:i(h),r=new x(1),a=I(()=>{let u;try{u=n()}catch(d){f(()=>r.error(d));return}f(()=>r.next(u))},{injector:t,manualCleanup:!0});return t.get(s).onDestroy(()=>{a.destroy(),r.complete()}),r.asObservable()}function V(n,e){var g,y;let r=!(e!=null&&e.manualCleanup)?(y=(g=e==null?void 0:e.injector)==null?void 0:g.get(s))!=null?y:i(s):null,a=M(e==null?void 0:e.equal),o;e!=null&&e.requireSync?o=v({kind:0},{equal:a}):o=v({kind:1,value:e==null?void 0:e.initialValue},{equal:a});let u,d=n.subscribe({next:c=>o.set({kind:1,value:c}),error:c=>{o.set({kind:2,error:c}),u==null||u()},complete:()=>{u==null||u()}});if(e!=null&&e.requireSync&&o().kind===0)throw new b(601,!1);return u=r==null?void 0:r.onDestroy(d.unsubscribe.bind(d)),k(()=>{let c=o();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new b(601,!1)}},{equal:e==null?void 0:e.equal})}function M(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}export{j as a,A as b,F as c,V as d};
